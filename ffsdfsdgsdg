-- LocalScript for "MinhZuTa" UI (Roblox Studio, client-side)
-- Put this LocalScript under StarterGui -> MinhZuTa

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local gui = script.Parent
gui.ResetOnSpawn = false

-- CONFIG
local LOGO_ID = "rbxassetid://86575734561372"  -- logo m·ªü/thu
local BACK_ID = "rbxassetid://865757345613"   -- ·∫£nh n·ªÅn anime (b√¨a)
local UI_WIDTH = 520
local UI_HEIGHT = 330

-- Clear potential old children (safety)
for _, c in pairs(gui:GetChildren()) do
    if c:IsA("Frame") or c:IsA("ImageLabel") or c:IsA("ImageButton") or c:IsA("TextButton") or c:IsA("TextLabel") then
        -- keep script only
    end
end

-- Root container (will be created dynamically)
local root = Instance.new("Frame")
root.Name = "Root"
root.Size = UDim2.new(0, UI_WIDTH, 0, UI_HEIGHT)
root.Position = UDim2.new(0.5, -UI_WIDTH/2, 0.5, -UI_HEIGHT/2)
root.AnchorPoint = Vector2.new(0.5, 0.5)
root.BackgroundTransparency = 1
root.Parent = gui

-- Background image (cover banner)
local cover = Instance.new("ImageLabel")
cover.Name = "Cover"
cover.Size = UDim2.new(1, 0, 0, 120)
cover.Position = UDim2.new(0, 0, 0, 0)
cover.BackgroundTransparency = 1
cover.Image = BACK_ID
cover.ScaleType = Enum.ScaleType.Crop
cover.ImageTransparency = 0
cover.Parent = root

-- Glass panel (main)
local panel = Instance.new("Frame")
panel.Name = "Panel"
panel.Size = UDim2.new(1, 0, 1, -40)
panel.Position = UDim2.new(0, 0, 0, 40)
panel.BackgroundColor3 = Color3.fromRGB(25,25,25)
panel.BackgroundTransparency = 0.5
panel.Parent = root

local panelCorner = Instance.new("UICorner")
panelCorner.CornerRadius = UDim.new(0, 12)
panelCorner.Parent = panel

-- subtle border stroke
local stroke = Instance.new("UIStroke")
stroke.Parent = panel
stroke.Color = Color3.fromRGB(200,200,200)
stroke.Transparency = 0.8
stroke.Thickness = 1.2

-- Title bar (on top of panel)
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -20, 0, 36)
title.Position = UDim2.new(0, 10, 0, 4)
title.BackgroundTransparency = 1
title.Text = "MinhZuTa =} Free key"
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = panel

-- Close X button (inside panel)
local closeBtn = Instance.new("TextButton")
closeBtn.Name = "CloseBtn"
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -40, 0, 5)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
closeBtn.Text = "√ó"
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 20
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.Parent = panel

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(1,0)
closeCorner.Parent = closeBtn

-- Left tabs frame
local left = Instance.new("Frame")
left.Name = "Left"
left.Size = UDim2.new(0, 130, 1, -60)
left.Position = UDim2.new(0, 10, 0, 50)
left.BackgroundTransparency = 0.3
left.BackgroundColor3 = Color3.fromRGB(40,40,45)
left.Parent = panel

local leftCorner = Instance.new("UICorner")
leftCorner.CornerRadius = UDim.new(0, 8)
leftCorner.Parent = left

-- Tab buttons
local function makeTabBtn(text, y)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(1, -10, 0, 40)
    b.Position = UDim2.new(0, 5, 0, y)
    b.Text = text
    b.Font = Enum.Font.SourceSansBold
    b.TextSize = 18
    b.TextColor3 = Color3.fromRGB(255,255,255)
    b.BackgroundColor3 = Color3.fromRGB(70,70,75)
    b.Parent = left
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0, 8)
    c.Parent = b
    return b
end

local tabAbout = makeTabBtn("Gi·ªõi thi·ªáu", 8)
local tabMenu  = makeTabBtn("Menu", 56)
local tabAtiban = makeTabBtn("Atiban", 104)

-- Content area (right)
local content = Instance.new("Frame")
content.Name = "Content"
content.Size = UDim2.new(1, -160, 1, -60)
content.Position = UDim2.new(0, 150, 0, 50)
content.BackgroundTransparency = 1
content.Parent = panel

-- Pages
local pageAbout = Instance.new("Frame"); pageAbout.Size = UDim2.new(1,0,1,0); pageAbout.BackgroundTransparency = 1; pageAbout.Parent = content
local pageMenu = Instance.new("Frame"); pageMenu.Size = UDim2.new(1,0,1,0); pageMenu.BackgroundTransparency = 1; pageMenu.Visible = false; pageMenu.Parent = content
local pageAtiban = Instance.new("Frame"); pageAtiban.Size = UDim2.new(1,0,1,0); pageAtiban.BackgroundTransparency = 1; pageAtiban.Visible = false; pageAtiban.Parent = content

-- Fill About page
local aboutLabel = Instance.new("TextLabel")
aboutLabel.Parent = pageAbout
aboutLabel.Size = UDim2.new(1, -20, 0, 80)
aboutLabel.Position = UDim2.new(0, 10, 0, 20)
aboutLabel.BackgroundTransparency = 1
aboutLabel.Text = "üå∏ C·∫£m ∆°n b·∫°n r·∫•t nhi·ªÅu üå∏\nTikTok: https://www.tiktok.com/@minhzuta"
aboutLabel.TextWrapped = true
aboutLabel.Font = Enum.Font.SourceSans
aboutLabel.TextSize = 18
aboutLabel.TextColor3 = Color3.fromRGB(255,255,255)

-- Utility to create a big button in Menu page
local function createMenuButton(parent, titleText, subtitleText, y, onClick)
    local btn = Instance.new("TextButton")
    btn.Parent = parent
    btn.Size = UDim2.new(1, -20, 0, 64)
    btn.Position = UDim2.new(0, 10, 0, y)
    btn.BackgroundColor3 = Color3.fromRGB(60,60,65)
    btn.Text = titleText .. "\n" .. subtitleText
    btn.TextWrapped = true
    btn.TextYAlignment = Enum.TextYAlignment.Center
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 18
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0,10)
    c.Parent = btn
    btn.MouseButton1Click:Connect(function()
        -- safe placeholder: call onClick (developer fills it)
        pcall(function() onClick() end)
    end)
    return btn
end

-- Placeholder functions: replace these with your own safe functions / Module calls
local function FramKimC ( )
    -- >>> REPLACE THIS with your in-game implementation if you own the game.
    -- e.g. require(script.Parent:WaitForChild("MyFarmModule")).StartDiamondFarm()
    -- For now we'll show a simple notification
    if player and player:FindFirstChildOfClass("PlayerGui") then
        -- simple label flash
        local notif = Instance.new("TextLabel")
        notif.Size = UDim2.new(0,220,0,40)
        notif.Position = UDim2.new(0.5,-110,0.1,0)
        notif.AnchorPoint = Vector2.new(0.5,0)
        notif.BackgroundColor3 = Color3.fromRGB(40,40,45)
        notif.TextColor3 = Color3.fromRGB(255,255,255)
        notif.Text = "Start Fram kim c∆∞∆°ng (dev override)"
        notif.Font = Enum.Font.SourceSansBold
        notif.TextSize = 16
        notif.Parent = player.PlayerGui
        task.delay(2, function() notif:Destroy() end)
    end
end

local function FramKeo ( )
    -- >>> REPLACE THIS with your in-game implementation if you own the game.
    if player and player:FindFirstChildOfClass("PlayerGui") then
        local notif = Instance.new("TextLabel")
        notif.Size = UDim2.new(0,220,0,40)
        notif.Position = UDim2.new(0.5,-110,0.1,0)
        notif.AnchorPoint = Vector2.new(0.5,0)
        notif.BackgroundColor3 = Color3.fromRGB(40,40,45)
        notif.TextColor3 = Color3.fromRGB(255,255,255)
        notif.Text = "Start Fram k·∫πo (dev override)"
        notif.Font = Enum.Font.SourceSansBold
        notif.TextSize = 16
        notif.Parent = player.PlayerGui
        task.delay(2, function() notif:Destroy() end)
    end
end

-- Create Menu buttons (these run placeholders above)
createMenuButton(pageMenu, "üíé Fram kim c∆∞∆°ng", "auto", 10, FramKimC)
createMenuButton(pageMenu, "üç¨ Candy Farm", "Farm k·∫πo t·ª± ƒë·ªông", 90, FramKeo)

-- Fill Atiban page (left empty for now)
local atibanLabel = Instance.new("TextLabel")
atibanLabel.Parent = pageAtiban
atibanLabel.Position = UDim2.new(0, 10, 0, 20)
atibanLabel.Size = UDim2.new(1, -20, 0, 100)
atibanLabel.BackgroundTransparency = 1
atibanLabel.Text = "Atiban (placeholder)\nB·∫°n c√≥ th·ªÉ th√™m ch·ª©c nƒÉng b·∫£o v·ªá ·ªü ƒë√¢y."
atibanLabel.TextWrapped = true
atibanLabel.Font = Enum.Font.SourceSans
atibanLabel.TextSize = 18
atibanLabel.TextColor3 = Color3.fromRGB(255,255,255)

-- Tab switching logic
local function showPage(which)
    pageAbout.Visible = (which == "about")
    pageMenu.Visible = (which == "menu")
    pageAtiban.Visible = (which == "atiban")
end

tabAbout.MouseButton1Click:Connect(function() showPage("about") end)
tabMenu.MouseButton1Click:Connect(function() showPage("menu") end)
tabAtiban.MouseButton1Click:Connect(function() showPage("atiban") end)

-- Logo button (circle) to toggle collapse to only logo visible
local logoBtn = Instance.new("ImageButton")
logoBtn.Name = "Logo"
logoBtn.Size = UDim2.new(0, 70, 0, 70)
logoBtn.Position = UDim2.new(0, 30, 0, 150)
logoBtn.AnchorPoint = Vector2.new(0,0)
logoBtn.Image = LOGO_ID
logoBtn.BackgroundTransparency = 1
logoBtn.Parent = gui

-- Make root draggable on touch + mouse (mobile-friendly)
local dragging = false
local dragStart = Vector2.new()
local startPos = UDim2.new()

local function beginDrag(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = root.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end

local function updateDrag(input)
    if dragging then
        local delta = input.Position - dragStart
        root.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end

root.InputBegan:Connect(beginDrag)
root.InputChanged:Connect(function(input) if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then updateDrag(input) end end)
UserInputService.InputChanged:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then updateDrag(input) end end)
UserInputService.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end end)

-- Collapse/expand behavior: if collapsed -> hide root and show only logo (logo sits where user clicked)
local collapsed = false
local storedPosition = root.Position

local function collapseUI()
    if collapsed then return end
    storedPosition = root.Position
    root.Visible = false
    logoBtn.Visible = true
    collapsed = true
end

local function expandUI()
    if not collapsed then return end
    root.Position = storedPosition
    root.Visible = true
    logoBtn.Visible = true -- keep logo visible as well
    collapsed = false
end

-- Connect logo click toggle
logoBtn.MouseButton1Click:Connect(function()
    if collapsed then
        expandUI()
    else
        collapseUI()
    end
end)

-- Connect close button to collapse (instead of destroying)
closeBtn.MouseButton1Click:Connect(collapseUI)

-- Start visible
root.Visible = true
logoBtn.Visible = true

-- Final notes in output
print("[MinhZuTa] GUI loaded (Studio-safe). Replace placeholder functions FramKimC / FramKeo with your own in-game logic.")
